<!DOCTYPE html><html>
<head>
<meta charset="utf-8">
<title>cs1.6 amxx编程 state临时教程 -- 作者:偶萤蛉(Oinling)</title>
<style>
	code {
		white-space: pre;
		color: rgb(0,0,255);
		background-color: #f1f1f1;
		font-family: Consolas, monospace;
		font-weight: bold;
	}
	.amxx-note {
		color: rgb(0,0,0);
		font-weight: normal;
	}
	.amxx-comment {
		color: rgb(63,159,63);
		font-weight: normal;
	}
	.amxx-directive {
		color: rgb(111,111,107);
		font-weight: normal;
	}
	.amxx-di {
		background: linear-gradient(to right, rgb(111,111,107), rgb(153,51,255));
		-webkit-background-clip: text;
		color: transparent;
		font-weight: normal;
	}
	.amxx-string {
		color: rgb(193,61,41);
		font-weight: normal;
	}
	.amxx-number {
		color: rgb(0,0,0);
		font-weight: normal;
	}
	.amxx-enumname {
		background: linear-gradient(to right, rgb(93,20,10), rgb(153,51,255));
		-webkit-background-clip: text;
		color: transparent;
	}
	.amxx-function {
		color: rgb(113,31,195);
		font-weight: bold;
	}
	.amxx-tag {
		color: rgb(93,20,10);
		font-weight: normal;
	}
	.amxx-symbol {
		color: rgb(153,51,255);
		font-weight: normal;
	}
</style>
</head>
<body>

<p><code>cs1.6 amxx编程 state临时教程 -- 作者:偶萤蛉(Oinling)

state的语法格式:

state <自动机名称:状态名称>;

自动机名称是一种自定义符号.定义时必须遵守符号命名规则.

状态名称是一种自定义符号,定义是必须遵守符号命名规则.

state语句用于切换某些同名函数的状态.

一般情况下不允许定义同名函数.除非定义了自动机名称和状态名称.

定义函数时,在参数列表右边可以用<自动机名称:状态名称>语句定义自动机和状态.

以下是state语句的使用方法:

#include amxmodx
// 定义正常状态下的func1函数
static func1() <> return 3;
// 定义Func1:State1状态下的func1函数
static func1() <<span class="amxx-symbol">Func1</span>:<span class="amxx-symbol">State1</span>> return 2;
// 定义Func1:State2状态下的func1函数
static func1() <<span class="amxx-symbol">Func1</span>:<span class="amxx-symbol">State2</span>> return 1;
// 定义正常状态下的func2函数
static func2() <> return 6;
// 定义State1状态下的func2函数
static func2() <<span class="amxx-symbol">State1</span>> return 5;
// 定义State2状态下的func2函数
static func2() <<span class="amxx-symbol">State2</span>> return 4;
public plugin_init()
{
	register_plugin("测试", "1.0.0", "偶萤蛉(Oinling)");
	
	server_print("[AMXX]func1<> = %d", func1());
	state Func1:State1;
	server_print("[AMXX]func1<<span class="amxx-symbol">Func1</span>:<span class="amxx-symbol">State1</span>> = %d", func1());
	state Func1:State2;
	server_print("[AMXX]func1<<span class="amxx-symbol">Func1</span>:<span class="amxx-symbol">State2</span>> = %d", func1());
	
	server_print("[AMXX]func2<> = %d", func2());
	state State1;
	server_print("[AMXX]func2<<span class="amxx-symbol">State1</span>> = %d", func2());
	state State2;
	server_print("[AMXX]func2<<span class="amxx-symbol">State2</span>> = %d", func2());
}

打印结果:

[AMXX]func1<> = 3
[AMXX]func1<<span class="amxx-symbol">Func1</span>:<span class="amxx-symbol">State1</span>> = 2
[AMXX]func1<<span class="amxx-symbol">Func1</span>:<span class="amxx-symbol">State2</span>> = 1
[AMXX]func2<> = 6
[AMXX]func2<<span class="amxx-symbol">State1</span>> = 5
[AMXX]func2<<span class="amxx-symbol">State</span>> = 4

最后一次切换的状态将会一直保持下来.我找不到如何将函数切换回<>状态.</code></p>

</body>
</html>
